
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>frow.tools.bubbles &#8212; frow 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="frow.other" href="other.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="frow-tools-bubbles">
<h1>frow.tools.bubbles<a class="headerlink" href="#frow-tools-bubbles" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-frow.tools.bubbles.easy">
<span id="frow-tools-bubbles-easy"></span><h2>frow.tools.bubbles.easy<a class="headerlink" href="#module-frow.tools.bubbles.easy" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="frow.tools.bubbles.easy.read">
<code class="sig-prename descclassname">frow.tools.bubbles.easy.</code><code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param">fitz_page</em>, <em class="sig-param">relative_rect=None</em>, <em class="sig-param">absolute_rect=None</em>, <em class="sig-param">zoom=1</em>, <em class="sig-param">bubble_reader_factory=&lt;frow.tools.bubbles.reader.BubbleReaderFactory object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.easy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a frow bubble array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fitz_page</strong> (<em>[</em><em>fitz page</em><em>]</em>) – Fitz page to read bubbles from</p></li>
<li><p><strong>relative_rect</strong> (<em>4-tuple</em><em>, </em><em>optional</em>) – [description]. Relative rect to grab data from. Defaults to None. (one of relative_window_rect or abs_window_rect must be None)</p></li>
<li><p><strong>absolute_rect</strong> (<em>4-tuple</em><em>, </em><em>optional</em>) – [description]. Absolute rect to grab data from. Defaults to None. (one of relative_window_rect or abs_window_rect must be None)</p></li>
<li><p><strong>zoom</strong> (<em>float</em><em>, </em><em>optional</em>) – zoom level. Defaults to 1.</p></li>
<li><p><strong>bubble_reader_factory</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – Factory that produces BubbleReaders. Used if one wants to change the image preprocessors in bubble detection. Defaults to default_bubble_reader_factory.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the orientation qr code cannot be detected.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Numpy array of True/False values according to which bubbles are activated.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>[numpy array]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-frow.tools.bubbles.make">
<span id="frow-tools-bubbles-make"></span><h2>frow.tools.bubbles.make<a class="headerlink" href="#module-frow.tools.bubbles.make" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="frow.tools.bubbles.make.insert_text_array">
<code class="sig-prename descclassname">frow.tools.bubbles.make.</code><code class="sig-name descname">insert_text_array</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fitz_page</span></em>, <em class="sig-param"><span class="n">text_array</span></em>, <em class="sig-param"><span class="n">fontsize</span><span class="o">=</span><span class="default_value">11</span></em>, <em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">0.8</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">7, 14</span></em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.make.insert_text_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts a 2-d array of strings onto a fitz page at regular intervalse</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fitz_page</strong> (<em>[</em><em>fitz page</em><em>]</em>) – Page to insert text array on</p></li>
<li><p><strong>text_array</strong> (<em>[</em><em>2d-str array</em><em>]</em>) – Text array</p></li>
<li><p><strong>fontsize</strong> (<em>int</em><em>, </em><em>optional</em>) – Defaults to 11.</p></li>
<li><p><strong>color</strong> (<em>float</em><em>, </em><em>optional</em>) – Defaults to 0.8.</p></li>
<li><p><strong>scale</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of a cell. Defaults to 20.</p></li>
<li><p><strong>offset</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Defaults to (7, 14).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="frow.tools.bubbles.make.make_bubble_array">
<code class="sig-prename descclassname">frow.tools.bubbles.make.</code><code class="sig-name descname">make_bubble_array</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">grid_shape</span><span class="o">=</span><span class="default_value">10, 10</span></em>, <em class="sig-param"><span class="n">padding</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">0.8</span></em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.make.make_bubble_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a bubble array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid_shape</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Shape of the bubble array. Defaults to (10, 10).</p></li>
<li><p><strong>padding</strong> (<em>float</em><em>, </em><em>optional</em>) – Padding for each cell. Defaults to 0.1.</p></li>
<li><p><strong>scale</strong> (<em>int</em><em>, </em><em>optional</em>) – size of a cell. Defaults to 20.</p></li>
<li><p><strong>color</strong> (<em>float</em><em>, </em><em>optional</em>) – Color used for the bubbles (See fitz colors). Defaults to 0.8.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a fitz pdf doc</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[fitz doc]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="frow.tools.bubbles.make.make_bubble_recorder">
<code class="sig-prename descclassname">frow.tools.bubbles.make.</code><code class="sig-name descname">make_bubble_recorder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">qr_data</span></em>, <em class="sig-param"><span class="n">array_fitz_doc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.make.make_bubble_recorder" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a fitz doc containing a bubble recorder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qr_data</strong> (<em>[</em><em>dict</em><em>]</em>) – output of make_qr_data</p></li>
<li><p><strong>array_fitz_doc</strong> (<em>[</em><em>fitz doc</em><em>]</em>) – output of make_bubble_array</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>combined orientation qr code and bubble array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[fitz doc]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="frow.tools.bubbles.make.make_qr_data">
<code class="sig-prename descclassname">frow.tools.bubbles.make.</code><code class="sig-name descname">make_qr_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">type_</span><span class="o">=</span><span class="default_value">'bubble'</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">grid_shape</span><span class="o">=</span><span class="default_value">10, 10</span></em>, <em class="sig-param"><span class="n">qr_span</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">array_position</span><span class="o">=</span><span class="default_value">'right'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.make.make_qr_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a data_dict for</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type</strong> (<em>str</em><em>, </em><em>optional</em>) – [description]. Defaults to “bubble”.</p></li>
<li><p><strong>name</strong> (<em>[</em><em>type</em><em>]</em><em>, </em><em>optional</em>) – [description]. Defaults to None.</p></li>
<li><p><strong>grid_shape</strong> (<em>tuple</em><em>, </em><em>optional</em>) – [description]. Defaults to (10, 10).</p></li>
<li><p><strong>qr_span</strong> (<em>int</em><em>, </em><em>optional</em>) – [description]. Defaults to 4.</p></li>
<li><p><strong>array_position</strong> (<em>str</em><em>, </em><em>optional</em>) – [description]. Defaults to “right”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[dict]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-frow.tools.bubbles.reader">
<span id="frow-tools-bubbles-reader"></span><h2>frow.tools.bubbles.reader<a class="headerlink" href="#module-frow.tools.bubbles.reader" title="Permalink to this headline">¶</a></h2>
<p>The implementation details of the bubble array reader.</p>
<p>Users should use the frow.bubbles.easy.read function and provide a custom factory with activation and preporcessors.</p>
<dl class="py class">
<dt id="frow.tools.bubbles.reader.BubbleReader">
<em class="property">class </em><code class="sig-prename descclassname">frow.tools.bubbles.reader.</code><code class="sig-name descname">BubbleReader</code><span class="sig-paren">(</span><em class="sig-param">pil_image</em>, <em class="sig-param">block_size=50</em>, <em class="sig-param">array_preprocessor=&lt;function default_array_preprocessor&gt;</em>, <em class="sig-param">block_preprocessor=&lt;function default_block_preprocessor&gt;</em>, <em class="sig-param">block_activation_function=&lt;function default_block_activation&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader" title="Permalink to this definition">¶</a></dt>
<dd><p>A reader of bubble arrays. Useser should use the function read in frow.tools.bubbles</p>
<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.array_origin">
<em class="property">property </em><code class="sig-name descname">array_origin</code><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.array_origin" title="Permalink to this definition">¶</a></dt>
<dd><p>The origin point where the bubble array is based at. Detected from the orientation qr code.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>4-ints</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>[numpy array]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.block_activations">
<em class="property">property </em><code class="sig-name descname">block_activations</code><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.block_activations" title="Permalink to this definition">¶</a></dt>
<dd><p>numpy array of the activation values for the bubble array.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>activation values for the bubble array.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.block_processed_bubble_array">
<em class="property">property </em><code class="sig-name descname">block_processed_bubble_array</code><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.block_processed_bubble_array" title="Permalink to this definition">¶</a></dt>
<dd><p>For debugging purposes only. The bubble array with cells processed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The processed image that activation detection will take place.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Image</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.bubble_matrix">
<code class="sig-name descname">bubble_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">threshold</span><span class="o">=</span><span class="default_value">0.05</span></em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.bubble_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>A true/false numpy array. True indicates an activated cell.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>float</em><em>, </em><em>optional</em>) – The threshold at which a cell activation value indicates an activation. Defaults to 0.05.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True/False activation values for the bubble array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.crop_block">
<code class="sig-name descname">crop_block</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.crop_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop a cell in the bubble array and apply the block preprocessor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>int</em>) – x-index of the cell</p></li>
<li><p><strong>y</strong> (<em>int</em>) – y-index of the cell</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cropped and processed cell.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pil.Image</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.cropped_bubble_array">
<em class="property">property </em><code class="sig-name descname">cropped_bubble_array</code><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.cropped_bubble_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops the bubble array</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Image containing the crop.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Image</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.qr_coords">
<em class="property">property </em><code class="sig-name descname">qr_coords</code><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.qr_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>The coordinates of the detected qr code.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>4-ints</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>[numpy.array]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.source_quad">
<em class="property">property </em><code class="sig-name descname">source_quad</code><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.source_quad" title="Permalink to this definition">¶</a></dt>
<dd><p>The coordinates of the corners of the bubble array.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>numpy arrays with the coordinates of the corners of the bubble array.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>4-tuples</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="frow.tools.bubbles.reader.BubbleReader.unit_vectors">
<em class="property">property </em><code class="sig-name descname">unit_vectors</code><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReader.unit_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Vectors that span a single cell of the bubble array.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>x-vector, y-vector as numpy arrays.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="frow.tools.bubbles.reader.BubbleReaderFactory">
<em class="property">class </em><code class="sig-prename descclassname">frow.tools.bubbles.reader.</code><code class="sig-name descname">BubbleReaderFactory</code><span class="sig-paren">(</span><em class="sig-param">block_size=50</em>, <em class="sig-param">array_preprocessor=&lt;function default_array_preprocessor&gt;</em>, <em class="sig-param">block_preprocessor=&lt;function default_block_preprocessor&gt;</em>, <em class="sig-param">block_activation_function=&lt;function default_block_activation&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#frow.tools.bubbles.reader.BubbleReaderFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory that builds BubbleReaders with given preprocessors and activations</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">frow</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../prose/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">frow</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">frow.other</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">frow.tools.bubbles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-frow.tools.bubbles.easy">frow.tools.bubbles.easy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-frow.tools.bubbles.make">frow.tools.bubbles.make</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-frow.tools.bubbles.reader">frow.tools.bubbles.reader</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="other.html" title="previous chapter">frow.other</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Miek Messerschmidt.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/reference/bubbles.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>